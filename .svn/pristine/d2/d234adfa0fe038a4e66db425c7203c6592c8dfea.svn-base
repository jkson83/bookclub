<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, shrink-to-fit=no, maximum-scale=1, user-scalable=0">
  <title>에브리북클럽</title>
  <link rel="stylesheet" href="../../resources/css/web/ui.main.css">
  <script type="text/javascript" src="../_ui_include/web_head.js"></script><!-- //Include: head -->
</head>
<body class="main">
  <div id="wrap" class="wrap">
    <script type="text/javascript" src="../_ui_include/web_header.js"></script>
    <div id="container" class="container">
      <div class="section header-black" id="section01">
        <div class="main-contents">

          <div class="main-visual-wrap">
            <div class="only-pc">
              <div class="img-area">
                <div class="imgs"><img src="../../resources/img/web/main/book_v1_img01.png" alt=""></div>
                <div class="main-visual-list">
                  <p class="main-visual-item n1"></p>
                  <p class="main-visual-item n2"></p>
                  <p class="main-visual-item n3"></p>
                  <p class="main-visual-item n4"></p>
                  <p class="main-visual-item n5"></p>
                  <p class="main-visual-item n6"></p>
                </div>
              </div>
            </div>
            <div class="only-mob">
              <div class="main-visual-area">
                <p class="main-visual-item child">
                  <img src="../../resources/img/web/main/mo/book_v1_img01.png" alt="">
                </p>
                <div class="main-visual-list">
                  <p class="main-visual-item n1"></p>
                  <p class="main-visual-item n2"></p>
                  <p class="main-visual-item n3"></p>
                  <p class="main-visual-item n4"></p>
                  <p class="main-visual-item n5"></p>
                  <p class="main-visual-item n6"></p>
                </div>
              </div>
            </div>
          </div>

          <div class="main-text">
            <h2>IB 창의융합 도서로 시작하는<strong>문해력 높이는<br class="mo-br"> 독서습관!</strong></h2>
            <p>IB 창의융합 도서를 통한 자율 독서학습<br>에브리북클럽으로 우리 아이 창의력과<br class="mo-br"> 표현력을 키워보세요.</p>
            <div class="btn-wrap">
              <a href="../WEB/WEB0501000000M.html" class="btn lg primary">에브리북클럽 시작하기</a>
            </div>
          </div>

        </div>
      </div>
      <div class="section header-white" id="section02">
        <div class="main-contents">
          <div class="main-visual">
            <div class="main-visual-item"></div>
          </div>

          <div class="main-text">
            <h2>문해력(글을 읽고 쓰고 이해하는 능력)은 <strong>세상을 여는 <br class="mo-br">열쇠입니다!</strong></h2>
            <p>이른 시기에 읽기의 즐거움을 알게 하는 것은<br class="mo-br"> 매우 중요하며<br class="pc-br"> 읽기는 사람을 행복하게<br class="mo-br"> 하고 성공적인 삶을 위한 기본 역량입니다.</p>
            <p class="stxt">한국교원단제총연합회 설문결과</p>
          </div>
        </div>
      </div>
      <div class="section header-black" id="section03">
        <div class="main-contents">
          <div class="main-visual">
            <div class="main-visual-item"></div>
          </div>

          <div class="main-text">
            <h2>많이 읽는 것과 <strong><span>'잘'</span> 읽는 것은 다릅니다!</strong></h2>
            <p>흔히 책을 읽으면 문해력이 높아진다고 하지만<br>내용을 이해하지 못한 채 글만 읽는 경우도 있어요.</p>
          </div>
        </div>
      </div>
      <div class="section header-white" id="section04">
        <div class="main-contents">

          <div class="main-text">
            <h2>문해력 높이는 독서습관을 위한 <strong>에브리북클럽만의 <br class="mo-br">콘텐츠</strong></h2>
            <p class="only-pc">에브리북클럽은 IB PYP 창의융합 주제 중심 도서를 통해<br> 문해력을 단계적으로 성장시킬 수 있는 독서 프로그램입니다.</p>
            <p class="only-mob">흔히 책을 읽으면 문해력이 높아진다고 하지만<br> 내용을 이해하지 못한 채 글만 읽는 경우도 있어요.</p>
          </div>

          <div class="main-visual">
            <div class="swiper-container v4">
              <ul class="swiper-wrapper">
                <li class="swiper-slide">
                  <div class="swiper-card n1">
                    <strong><span>균</span>형잡힌<br>독서습관</strong>
                    <p>주제별 도서와 교과연계 도서뿐 아니라, 배경지식을 위한 도서, 창작 도서, 인물 도서, 전래동화 등 다양한 책을 읽게 됩니다.</p>
                  </div>
                </li>
                <li class="swiper-slide">
                  <div class="swiper-card n2">
                    <strong><span>I</span>B PYP 창의융합<br>주제 중심 도서</strong>
                    <p>IB 주제와 교과과정의 교집합을 찾아 주입식 독서가 아닌 스스로 찾아 읽는 자율 독서 습관을 만들어갑니다.</p>
                  </div>
                </li>
                <li class="swiper-slide">
                  <div class="swiper-card n3">
                    <strong><span>생</span>각의 크기가 커지는<br>표현형 독서</strong>
                    <p>단순히 눈으로 읽는 것뿐 아니라 소리 내서 읽기, 나만의 글쓰기, 문해력 게임 등을 통해 표현력과 자신감이 쑥쑥 자랍니다.</p>
                  </div>
                </li>
                <li class="swiper-slide">
                  <div class="swiper-card n4">
                    <strong><span>아</span>이 레벨에 따라<br>수준별 맞춤 학습</strong>
                    <p>7살부터 11살까지 5단계 60레벨로 나누어진 커리큘럼에 따라 개별 맞춤형 학습을 진행합니다.</p>
                  </div>
                </li>
                <li class="swiper-slide">
                  <div class="swiper-card n5">
                    <strong><span>게</span>임을 통한 <br class="pc-br">재미있는 <br class="mo-br"> 독후 확인 학습</strong>
                    <p>독서 후 게임 형식의 확인 학습을 통해 아이 스스로 도서의 내용을 제대로 이해하고, 활용할 수 있는지 점검할 수 있습니다.</p>
                  </div>
                </li>
                <li class="swiper-slide">
                  <div class="swiper-card n6">
                    <strong><span>성</span>장과정이 한 눈에 보이는<br class="mo-br">세심한<br class="pc-br"> 학습 관리 시스템</strong>
                    <p>독서 레벨과 성향, 학습이력은 물론 도서별 학습 진행률과 사고 분석까지 확인 가능한 학습 관리 시스템(LMS)를 제공합니다.</p>
                  </div>
                </li>
              </ul>
            </div>
            <div class="swiper-controller">
              <button type="button" class="swiper-button-prev"><span class="hidden">이전</span></button>
              <button type="button" class="swiper-button-next"><span class="hidden">다음</span></button>
              <button type="button" class="swiper-button-stop"><span class="hidden">일시정지</span></button>
              <button type="button" class="swiper-button-play"><span class="hidden">재생</span></button>
            </div>
          </div>

        </div>
      </div>
      <div class="section header-black" id="section05">
        <div class="main-contents">

          <div class="main-text">
            <h2>글로벌 인재양성을 위한<strong>다양한 <span>IB</span>도서를<br class="mo-br"> 만나보세요</strong></h2>
            <p class="only-mob">흔히 책을 읽으면 문해력이 높아진다고 하지만<br> 내용을 이해하지 못한 채 글만 읽는 경우도 있어요.</p>
          </div>

          <div class="main-visual">
            <div class="swiper-container v5">
              <ul class="swiper-wrapper">
                <li class="swiper-slide type1">
                  <div class="swiper-img-box">
                    <img src="../../resources/img/web/main/book1/book_img01.png" alt="">
                  </div>
                </li>
                <li class="swiper-slide">
                  <div class="swiper-img-box">
                    <img src="../../resources/img/web/main/book1/book_img02.png" alt="">
                  </div>
                </li>
                <li class="swiper-slide">
                  <div class="swiper-img-box">
                    <img src="../../resources/img/web/main/book1/book_img03.png" alt="">
                  </div>
                </li>
                <li class="swiper-slide">
                  <div class="swiper-img-box">
                    <img src="../../resources/img/web/main/book1/book_img04.png" alt="">
                  </div>
                </li>
                <li class="swiper-slide type2">
                  <div class="swiper-img-box">
                    <img src="../../resources/img/web/main/book2/book_img01.jpg" alt="">
                  </div>
                </li>
                <li class="swiper-slide">
                  <div class="swiper-img-box">
                    <img src="../../resources/img/web/main/book2/book_img02.jpg" alt="">
                  </div>
                </li>
                <li class="swiper-slide">
                  <div class="swiper-img-box">
                    <img src="../../resources/img/web/main/book2/book_img03.jpg" alt="">
                  </div>
                </li>
                <li class="swiper-slide">
                  <div class="swiper-img-box">
                    <img src="../../resources/img/web/main/book2/book_img04.jpg" alt="">
                  </div>
                </li>
                <li class="swiper-slide type3">
                  <div class="swiper-img-box">
                    <img src="../../resources/img/web/main/book3/book_img01.png" alt="">
                  </div>
                </li>
                <li class="swiper-slide">
                  <div class="swiper-img-box">
                    <img src="../../resources/img/web/main/book3/book_img02.png" alt="">
                  </div>
                </li>
                <li class="swiper-slide">
                  <div class="swiper-img-box">
                    <img src="../../resources/img/web/main/book3/book_img03.png" alt="">
                  </div>
                </li>
                <li class="swiper-slide">
                  <div class="swiper-img-box">
                    <img src="../../resources/img/web/main/book3/book_img04.png" alt="">
                  </div>
                </li>
                <li class="swiper-slide type4">
                  <div class="swiper-img-box">
                    <img src="../../resources/img/web/main/book4/book_img01.png" alt="">
                  </div>
                </li>
                <li class="swiper-slide">
                  <div class="swiper-img-box">
                    <img src="../../resources/img/web/main/book4/book_img02.png" alt="">
                  </div>
                </li>
                <li class="swiper-slide">
                  <div class="swiper-img-box">
                    <img src="../../resources/img/web/main/book4/book_img03.png" alt="">
                  </div>
                </li>
                <li class="swiper-slide">
                  <div class="swiper-img-box">
                    <img src="../../resources/img/web/main/book4/book_img04.png" alt="">
                  </div>
                </li>
                <li class="swiper-slide type5">
                  <div class="swiper-img-box">
                    <img src="../../resources/img/web/main/book5/book_img01.png" alt="">
                  </div>
                </li>
                <li class="swiper-slide">
                  <div class="swiper-img-box">
                    <img src="../../resources/img/web/main/book5/book_img02.png" alt="">
                  </div>
                </li>
                <li class="swiper-slide">
                  <div class="swiper-img-box">
                    <img src="../../resources/img/web/main/book5/book_img03.png" alt="">
                  </div>
                </li>
                <li class="swiper-slide">
                  <div class="swiper-img-box">
                    <img src="../../resources/img/web/main/book5/book_img04.png" alt="">
                  </div>
                </li>
                <li class="swiper-slide type6">
                  <div class="swiper-img-box">
                    <img src="../../resources/img/web/main/book6/book_img01.png" alt="">
                  </div>
                </li>
                <li class="swiper-slide">
                  <div class="swiper-img-box">
                    <img src="../../resources/img/web/main/book6/book_img02.png" alt="">
                  </div>
                </li>
                <li class="swiper-slide">
                  <div class="swiper-img-box">
                    <img src="../../resources/img/web/main/book6/book_img03.png" alt="">
                  </div>
                </li>
                <li class="swiper-slide">
                  <div class="swiper-img-box">
                    <img src="../../resources/img/web/main/book6/book_img04.png" alt="">
                  </div>
                </li>
              </ul>
            </div>
            <div class="swiper-pagination-wrap">
              <button type="button" class="swiper-pagination-bullet">나 그리고 우리</button>
              <button type="button" class="swiper-pagination-bullet">우리가 살아가는 세상</button>
              <button type="button" class="swiper-pagination-bullet">나를 표현하는 방법</button>
              <button type="button" class="swiper-pagination-bullet">세상을 움직이는 방법</button>
              <button type="button" class="swiper-pagination-bullet">생각을 정리하기</button>
              <button type="button" class="swiper-pagination-bullet">우리가 살고 있는 지구</button>
            </div>
          </div>

          <div class="main-text">
            <strong class="highlight"><span>* IB (International Baccalaureate, 국제 바칼로레아)란?</span></strong>
            <p>국제 교육 기구인 IB 기구에 의해 개발된 문제 해결 능력, 창의력, 국제 이해력 등 <br> 다양한 능력을 길러주는 것을 목표로 하는 검증된 국제적인 교육 과정 및 평가 시스템 입니다.</p>
          </div>
        </div>
      </div>
      <div class="section header-white" id="section06">
        <div class="main-contents">
          
          <div class="main-text">
            <h2>이렇게 많은 아이들이<strong>에브리북클럽에서 <br class="mo-br">문해력을 기르고 있어요</strong></h2>
          </div>

          <div class="carousel-wrap">
            <div id="carousel" class="carousel">
              <div id='item_1' class=" hideLeft">
                  <div class="postscript woman">
                    <p>그림책을 너무 좋아해서 시작했는데 요즘은 이것저것 읽고 게임으로 확인받는 걸 너무 좋아해요 어휘력이 많이 늘었다는 게 느껴지네요^^</p>
                    <p class="user-info">초등학교 1학년 <span>정ㅇㅇ</span> 학부모님</p>
                  </div>
              </div>
              <div id='item_2' class="prevLeftSecond">
                <div class="postscript woman">
                  <p>아이가 먼저 책도 읽고 문제풀이도 하고 있네요. 점점 습관이 되나 봐요~</p>
                  <p class="user-info">초등학교 1학년 <span>이ㅇㅇ</span> 학부모님</p>
                </div>
              </div>
        
              <div id='item_3' class="prev">
                <div class="postscript">
                  <p>독서 습관이 생기니까 이젠 알아서 다른 도서들도 읽기 시작했어요~</p>
                  <p class="user-info">초등학교 2학년 <span>윤ㅇㅇ</span> 학부모님</p>
                </div>
              </div>
        
              <div id='item_4' class="selected">
                <div class="postscript">
                  <p>칭찬 스티커가 늘어가니까 아이가 더 재밌어하는 게 보여요~ 요즘은 먼저 책 읽자는 말을 하네요</p>
                  <p class="user-info">6살 <span>박ㅇㅇ</span> 학부모님</p>
                </div>
              </div>
        
              <div id='item_5' class="next">
                <div class="postscript woman">
                  <p>책 고르는 게 제일 고민이었는데 커리큘럼이 좋아 보여 시키고 있어요. 일단, 아이가 너무 좋아하네요.</p>
                  <p class="user-info">초등학교 3학년 <span>김ㅇㅇ</span> 학부모님</p>
                </div>
              </div>
        
              <div id='item_6' class="nextRightSecond">
                <div class="postscript">
                  <p>읽는 것뿐만 아니라 말하고, 쓰는 학습이 있어서 도움이 많이 되는 것 같아요.</p>
                  <p class="user-info">7살 <span>최ㅇㅇ</span> 학부모님</p>
                </div>
              </div>
            </div>
            <div class="carousel-buttons">
              <button class="carousel-buttons-prev" role="button" id="prev">
                <span class="hidden">이전</span>
              </button>
              <button class="carousel-buttons-next" role="button" id="next">
                <span class="hidden">다음</span>
              </button>
            </div>
          </div>

        </div>
      </div>
      <div class="section header-black" id="section07">
        <div class="main-contents">

          <div class="main-text">
            <h2>에브리북클럽으로 <strong>문해력 높이는<br>독서습관을 만들어요!</strong></h2>
            <div class="btn-wrap">
              <a href="../WEB/WEB0501000000M.html" class="btn lg primary">에브리북클럽 시작하기</a>
            </div>
          </div>
          <div class="main-visual">
            <div class="main-visual-item"></div>
          </div>

        </div>
      </div>
      <ul class="main-nav">
        <li class="main-nav__item"><a href="#section01" class="main-nav__anchor"></a></li>
        <li class="main-nav__item"><a href="#section02" class="main-nav__anchor"></a></li>
        <li class="main-nav__item"><a href="#section03" class="main-nav__anchor"></a></li>
        <li class="main-nav__item"><a href="#section04" class="main-nav__anchor"></a></li>
        <li class="main-nav__item"><a href="#section05" class="main-nav__anchor"></a></li>
        <li class="main-nav__item"><a href="#section06" class="main-nav__anchor"></a></li>
        <li class="main-nav__item"><a href="#section07" class="main-nav__anchor"></a></li>
      </ul>
    </div>
    <script type="text/javascript" src="../_ui_include/footer.js"></script>
  </div>

  <!-- 231229 : script 부분 수정 -->
  <script>
    $(document).ready(function() {

      function scrollEvent() {
        var header = $('.header');
        var scrollPosition = $(window).scrollTop();
        $('.header-black').each(function() {
          var bounding = $(this).offset();
          if (bounding.top <= scrollPosition && bounding.top + $(this).height() > scrollPosition) {
            header.removeClass('white');
          }
        });
        $('.header-white').each(function() {
          var bounding = $(this).offset();
          if (bounding.top <= scrollPosition && bounding.top + $(this).height() > scrollPosition) {
            header.addClass('white');
          }
        });
      };
      $(window).scroll(function() {
        scrollEvent();
      }); 

    let swiper_v4 = new Swiper('.swiper-container.v4', { 
          slidesPerView: 'auto',
          spaceBetween: 20,
          autoplay: true,
          delay: 3000,
          loop : true,
          centeredSlides: true,
          //loopedSlides: 1,
          //loopAdditionalSlides : 1, 
          navigation: {
            nextEl: '.swiper-button-next',
            prevEl: '.swiper-button-prev',
          },
          a11y: { 
            enabled: true,
            prevSlideMessage: '이전 슬라이드',
            nextSlideMessage: '다음 슬라이드',   
            slideLabelMessage: '총 {{slidesLength}}장의 슬라이드 중 {{index}}번 슬라이드 입니다.',
          },
          breakpoints: {
            1024: {
              centeredSlides: false,
            },
          },
        });
        $('.swiper-container.v4').on('mouseenter', function(e){
          swiper_v4.autoplay.stop();
        });
        $('.swiper-container.v4').on('mouseleave', function(e){
          swiper_v4.autoplay.start();
        });
        $('.swiper-button-stop').on('click', function(){
          swiper_v4.autoplay.stop();
          $(this).hide();
          $('.swiper-button-play').show();  
        });
        $('.swiper-button-play').on('click', function(){
          swiper_v4.autoplay.start();
          $(this).hide();
          $('.swiper-button-stop').show();  
        });

    let swiper_v5;
        if( typeof(swiper_v5) === 'object') swiper_v5.destroy();
          
        swiper_v5 = new Swiper('.swiper-container.v5', {
            slidesPerView: 1,
            autoplay: true,
            delay: 1000,
            spaceBetween: 15,
            touchEventsTarget: 'wrapper',
            //centeredSlides: true,
            observer: true,
            observeParents: true,
            loop: true,
            //loopedSlides: 1,
            //loopAdditionalSlides: 2,
            //loopFillGroupWithBlank : true,
            a11y: { 
              enabled: true,
              prevSlideMessage: '이전 슬라이드',
              nextSlideMessage: '다음 슬라이드',   
              slideLabelMessage: '총 {{slidesLength}}장의 슬라이드 중 {{index}}번 슬라이드 입니다.',
            },
            on: {
              slideChangeTransitionEnd: function () {
                const swpBtn = document.querySelectorAll('.swiper-pagination-bullet');
                let activeIndex = swiper_v5.realIndex;
                let btnIndex = Math.floor(activeIndex / 4);
                
                setActiveBtn(btnIndex);
                swiperBtnScrollX(swpBtn, btnIndex);
              }
            },
            breakpoints: {
              1024: {
                slidesPerView: 4,
                spaceBetween: 20
              },
              768: {
                slidesPerView: 1,
                spaceBetween: 15
              }
            }
        });

        $('.swiper-container.v5').on('mouseenter', function(e){
          swiper_v5.autoplay.stop();
        });
        $('.swiper-container.v5').on('mouseleave', function(e){
          swiper_v5.autoplay.start();
        });

        // swiper button event
        const swp = document.querySelector('.swiper-pagination-wrap');
        const swpBtn = document.querySelectorAll('.swiper-pagination-bullet');
        swpBtn.forEach(function (btn, index) {
          btn.addEventListener('click', function() {
            let slideIndex = index * 4;
            
            swiper_v5.slideTo(slideIndex);
            swiper_v5.autoplay.start();
            setActiveBtn(index);
            swiperBtnScrollX(swpBtn, index);
          }); 
        });

        function swiperBtnScrollX(target, idx) {
          let activeButtonWidth = document.querySelector('.swiper-pagination-bullet.active').offsetWidth; // 활성화된 버튼의 너비
          let totalWidth = 0;

          //console.log(target);
            // 현재 클릭된 버튼보다 이전 버튼들의 너비를 더해 전체 너비를 계산
            for (var i = 0; i < idx; i++) {
              totalWidth += target[i].offsetWidth;
            }

            // 스크롤 위치 계산하여 스크롤 이동
            var scrollPos = totalWidth - (window.innerWidth - activeButtonWidth) / 2;
            swp.scrollTo({
              top: 0,
              left: scrollPos,
              behavior: 'smooth'
            });
        }

        // swiper button active
        function setActiveBtn(index) {
          const swpBtn = document.querySelectorAll('.swiper-pagination-bullet');
          swpBtn.forEach(function (btn, btnIndex) {

              if(btnIndex === index) {
                btn.classList.add('active');
              } else {
                btn.classList.remove('active');
              }
          });
        }
        setActiveBtn(0); // 첫번째 swiper 버튼 active 주기


        ////////////////////////////////////////////////////////////////

        const html = document.querySelector('html');
        const body = document.querySelector('body');
        const container = document.querySelector('.container');
        const sections = html.querySelectorAll('.section');
        const menu = document.querySelector('.btn-menu');
        const navAnchorWrap = document.querySelector('.main-nav');
        const navAnchors = navAnchorWrap.querySelectorAll('.main-nav__anchor');
        const footer = document.querySelector('.footer');
        const lastPage = sections.length;
        const userAgent = navigator.userAgent.toLowerCase();
      

        let page = 0;
        // startX = 0, startY = 0, endX = 0, endY = 0
        let isAnimating = false;
        let isModalOpen = false;
        let isSwiping;
      
        let isMobileOrTablet = 
        /(iPhone|Android|ipad|tablet|(android(?!.*mobile))|(windows(?!.*phone)(.*touch))|kindle|playbook|silk|(puffin(?!.*(IP|AP|WP))))/.test(
          navigator.userAgent
        );
        

        if(isMobileOrTablet || window.innerWidth <= 1024) {
          console.log(isMobileOrTablet);
        } else {
          html.style.overflow = 'hidden';
          html.scrollTo({ top: 0, behavior: 'smooth' });
          pcScrollEvent();
          
          menu.addEventListener('click', function() {
            if(body.classList.contains('modal-open')) {
              isModalOpen = true;
            } else {
              isModalOpen = false;
              pcScrollEvent();
            }
          });
        }

        // Mob
        function mobTouchEvent() {
        
          window.addEventListener('touchstart', function(e) {  
            if (html.classList.contains("isAnimated")) return;
            startX = e.touches[0].clientX;
            startY = e.touches[0].clientY;
          });

          window.addEventListener('touchmove', function(e) {
            if (html.classList.contains("isAnimated")) return;
            endX = e.touches[0].clientX;
            endY = e.touches[0].clientY;
            
            const deltaX = endX - startX;
            const deltaY = endY - startY;

            if(Math.abs(deltaX) > Math.abs(deltaY)) {
              e.preventDefault();
              console.log('가로'); 
            } else{
              handleGesture();
              console.log('세로');
            }
          });

          // window.addEventListener('touchend', function() {
          //   if (html.classList.contains("isAnimated")) return;          
          //   handleGesture();
          // });

          const swp = document.querySelector('.swiper-container');
          swp.addEventListener('touchstart', function(e) {
            swiperStartX = e.touches[0].clientX;

            if(swiperStartX > 0) {
              isSwiping = false;
              console.log(isSwiping, swiperStartX);
            }
          });
          
          function handleGesture() {
            if (startY > endY) {
              if (page === lastPage) return;
              page++;
            } else {
              if (page === 0) return;
              page--;
            }

            //let posTop = page * window.screen.height;
            let posTop = page * window.innerHeight;
            scrollToPos(html, posTop, 600);
            html.classList.add("isAnimated");  
          }
        }
        
        // PC
        function pcScrollEvent () {
          navAnchors[0].parentElement.classList.add('is-active');
          
          body.addEventListener('wheel', function(e) {
            // modal-open 클래스 있으면 함수 실행 중지
            if (isModalOpen) {
              return;
            }

            if (html.classList.contains("isAnimated")) return;

            if (e.deltaY > 0) {
                if (page === lastPage) return;
                page++;

            } else if (e.deltaY < 0) {
                if (page === 0) return;
                page--;
            }

            let posTop = page * window.innerHeight;
            scrollToPos(html, posTop, 600);
            navActiveBtn(page);
            html.classList.add("isAnimated");
          }, { passive: false });
        }
      
        function scrollToSection(sectionIndex) {
          const posTop = sections[sectionIndex].offsetTop;
          scrollToPos(html, posTop, 600);
          isAnimating = true;

          setTimeout(() => {
            isAnimating = false;
          }, 600);
        }

        function scrollToPos(element, to, duration) {
          var start = element.scrollTop,
              change = to - start,
              currentTime = 0,
              increment = 20;

          var animateScroll = function() {
              currentTime += increment;
              var val = Math.easeInOutQuad(currentTime, start, change, duration);
              element.scrollTop = val;
              if (currentTime < duration) {
                  setTimeout(animateScroll, increment);
              }
          };
          animateScroll();
          
          setTimeout(function() {
              element.classList.remove("isAnimated");
          }, duration);
        }

        function navActiveBtn (activePageIndex) {
          navAnchors.forEach((anchor, index) => {
            if( index === activePageIndex ) {
              anchor.parentElement.classList.add('is-active');
            } else {
              anchor.parentElement.classList.remove('is-active');
            }
          });
        }

        navAnchors.forEach((anchor, index) => {
          anchor.addEventListener('click', function(e) {
            e.preventDefault();
            page = index;
            scrollToSection(page);
            navActiveBtn(page);
          });
        })

        Math.easeInOutQuad = function(currentTime, start, change, duration) {
          currentTime /= duration / 2;
            if (currentTime < 1) return change / 2 * currentTime * currentTime + start;
            currentTime--;
            return -change / 2 * (currentTime * (currentTime - 2) - 1) + start;
        };
    });



    (() => {
      if (!window.CarouselSlider) window.CarouselSlider = {}; // window 객체에 CarouselSlider 객체 선언
      const _$ = str => document.querySelector(str); // _$(element) 

      const CarouselSlider = {
        element: null,

        init (el) { // init
          this._element = el;
          const _element = _$(`#${el}`) // element 공통화

          // document.addEventListener("keydown", CarouselSlider.keypress);
          // _element.addEventListener("click", CarouselSlider.select, true);

          _element.addEventListener("mousedown", CarouselSlider.doDown);
          _element.addEventListener("mouseup", CarouselSlider.doUp);

          _element.addEventListener("touchstart", CarouselSlider.doDown);
          _element.addEventListener("touchend", CarouselSlider.doup);

          CarouselSlider.re_order();

          _$('#prev').addEventListener("click", CarouselSlider.previous);
          _$('#next').addEventListener("click", CarouselSlider.next);

          CarouselSlider.selected = _$(".selected");
        },

        removeClass (el, classname='') { // 클래스 지우기
          if (el) {
            if (classname === '') el.className = '';
            else el.classList.remove(classname);
            return el;
          }
          return;
        },

        re_order () { // 엘리먼트 재설정 
          const _element = _$(`#${this._element}`);
          const _length = _element.children.length;
          const _childrens = _element.children;

          for (let i = 0; i < _length; i++) {
            _childrens[i].dataset.pos = i;
          }
        },

        moveElement (direction) { // 엘리먼트 이동
          let _selected = direction; // const X
          const _element = _$(`#${this._element}`);

          if (typeof direction === "string") {
            // console.log(`got string: ${el}`);
            _selected = (direction == "next") ? 
              _$(".selected").nextElementSibling : 
              _$(".selected").previousElementSibling;
            // console.dir(selected);
          }

          const curpos = parseInt(CarouselSlider.selected.dataset.pos);
          const tgtpos = parseInt(_selected.dataset.pos);

          const cnt = curpos - tgtpos;
          const dir = (cnt < 0) ? -1 : 1;
          const shift = Math.abs(cnt);

          for (let i = 0; i < shift; i++) {
            let __el = (dir == -1) ? 
            _element.firstElementChild : 
            _element.lastElementChild; 

            if (dir == -1) {
              __el.dataset.pos = _element.children.length;
              _element.append(__el);
            } else {
              __el.dataset.pos = 0;
              _element.prepend(__el);
            }

            // console.log(direction)
            CarouselSlider.re_order();
          }

          CarouselSlider.selected = _selected;
          _selected.className = '';
          _selected.classList.add("selected");

          // prev
          const prev = _selected.previousElementSibling;
          const prevSecond = prev ? 
            prev.previousElementSibling : 
            _selected.parentElement.lastElementChild;
            
          CarouselSlider.removeClass(prev).classList.add('prev');
          CarouselSlider.removeClass(prevSecond).classList.add("prevLeftSecond");
          CarouselSlider.prevAll(prevSecond).forEach((item) => { 
            item.className = ''; 
            item.classList.add('hideLeft') 
          });

          // next
          const next = _selected.nextElementSibling; 
          const nextSecond = next ? 
            next.nextElementSibling : 
            _selected.parentElement.firstElementChild;

          CarouselSlider.removeClass(next).classList.add('next');
          CarouselSlider.removeClass(nextSecond).classList.add("nextRightSecond");
          CarouselSlider.nextAll(nextSecond).forEach((item) => { 
            item.className = ''; 
            item.classList.add('hideRight') 
          });
        },

        select (e) {
          let _tgt = e.target;
          console.log(_tgt)
          
          while (!_tgt.parentElement.classList.contains('carousel')) {
            _tgt = _tgt.parentElement;
          }
          
          CarouselSlider.moveElement(_tgt);
        },
        prevAll (el) {
          let els = [];
          if (el) {
            while (el = el.previousElementSibling) { 
              els.push(el); 
            }
          }
          return els;
        },
        nextAll (el) {
          let els = [];
          if (el) {
            while (el = el.nextElementSibling) { 
              els.push(el); 
            }
          }
          return els;
        },
        previous (e) { // 이전 버튼
          CarouselSlider.moveElement('prev');
        },
        next (e) { // 다음 버튼
          CarouselSlider.moveElement('next');
        },
        doDown (e) { // 
          // console.log(`down: ${e.x}`);
          CarouselSlider.state.downX = e.x;
        },
        doUp (e) { // 
          // console.log(`up: ${e.x}`);

          let _direction = 0,
            _velocity = 0;

          if (CarouselSlider.state.downX) {
            _direction = (CarouselSlider.state.downX > e.x) ? -1 : 1;
            _velocity = CarouselSlider.state.downX - e.x;

            if (Math.abs(CarouselSlider.state.downX - e.x) < 10) { // 절대값 구하기 Math.abs(-5) --> 5
              CarouselSlider.select(e);
              return false;
            }

            if (_direction === -1) {
              CarouselSlider.moveElement('next');
            } else {
              CarouselSlider.moveElement('prev');
            }

            CarouselSlider.state.downX = 0;
          }
        },

        // keypress (e) { // 키보드 컨트롤
        //   switch (e.which) {
        //     case 37: // left
        //       CarouselSlider.move('prev');
        //       break;
        //     case 39: // right
        //       CarouselSlider.move('next');
        //       break;
        //     default: return;
        //   }
        //   e.preventDefault();
        //   return false;
        // },

        state: {} // downX
      }
      CarouselSlider.init("carousel");
    })();
  </script>
  <!--// 231229 -->
</body>
</html>